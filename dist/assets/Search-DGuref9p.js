import{A as k,W as E,n as o,r as a,X as A,j as e,D as L}from"./index-BB63jZdJ.js";import{P as w}from"./Product-card-C_ySo0Jl.js";const Q=()=>{const u=k(),{data:p,isLoading:g,isError:j,error:c}=E("");if(j){const s=c;o.error(s.data.message)}const[d,m]=a.useState(""),[n,v]=a.useState(1e5),[l,C]=a.useState(""),[h,P]=a.useState(""),[r,x]=a.useState(1),S=r<4,f=r>1,y=s=>{if(s.stock<1)return o.error("Out of stock");u(L(s)),o.success("Added to cart")};let N={search:d,price:n,category:h,sort:l,page:r};const{data:t,isLoading:D,isError:b}=A(N);if(console.log(t),b){console.log(c);const s=c;o.error(s.data.message)}return e.jsxs("div",{className:"search-ui",children:[e.jsxs("aside",{children:[e.jsx("h2",{children:"Filters"}),e.jsxs("div",{children:[e.jsx("h4",{children:"sort"}),e.jsxs("select",{name:"order",value:l,onChange:s=>C(s.target.value),children:[e.jsx("option",{value:"",children:"none"}),e.jsx("option",{value:"asc",children:"low to high"}),e.jsx("option",{value:"desc",children:"high to low"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{children:["Max Price : ",n||""]}),e.jsx("input",{type:"range",min:0,max:1e5,value:n,onChange:s=>{v(Number(s.target.value))}})]}),e.jsxs("div",{children:[e.jsx("h4",{children:"category"}),e.jsxs("select",{name:"category",value:h,onChange:s=>{P(s.target.value)},children:[e.jsx("option",{value:"",children:"All"}),!g&&p?.message.map(s=>e.jsx("option",{value:s,children:s.toUpperCase()},s))]})]})]}),e.jsxs("main",{children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Products"}),e.jsx("input",{type:"text",value:d,placeholder:"Search product ",onChange:s=>m(s.target.value)})]}),e.jsx("div",{className:"product-list",children:t?.message.map(s=>e.jsx(w,{productId:s._id,name:s.name,price:s.price,stock:s.stock,handler:y,photo:s.photo},s._id))}),t&&t.totalPages>1?e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"prev",disabled:!f,onClick:s=>{x(i=>i-1)},children:"prev"}),e.jsxs("p",{className:"pg",children:[r," of ",4]}),e.jsx("button",{className:"next",disabled:!S,onClick:s=>{x(i=>i+1)},children:"next"})]}):e.jsx("div",{})]})]})};export{Q as default};
